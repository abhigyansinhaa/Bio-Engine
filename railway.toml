[build]
builder = "NIXPACKS"

[build.nixpacksPlan.phases.install]
cmds = ["pip install fastapi uvicorn pydantic python-multipart python-dotenv neo4j"]

[deploy]
startCommand = "pip install --no-cache-dir sentence-transformers==2.2.2 faiss-cpu==1.7.4 && uvicorn main:app --host 0.0.0.0 --port $PORT"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 3
